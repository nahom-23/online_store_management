<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <!-- Group category for the selection -->
        <record id="module_category_management_store" model="ir.module.category">
            <field name="name">store management</field>
            <field name="description">Access rights for the store management module</field>
            <field name="sequence">20</field>
        </record>

        <!-- Groupe Seller/User store -->
        <record id="group_store_user" model="res.groups">
            <field name="name">Seller store</field>
            <field name="category_id" ref="module_category_management_store"/>
            <field name="comment">Please consult the products and orders, believe the orders</field>
        </record>

        <!-- Groupe Manager store -->
        <record id="group_store_manager" model="res.groups">
            <field name="name">Manager store</field>
            <field name="category_id" ref="module_category_management_store"/>
            <field name="implied_ids" eval="[(4, ref('group_store_user'))]"/>
            <field name="comment">See all aspects of the store: products, orders, stocks</field>
        </record>

        <!-- View for the management of users with role selection -->
        <record id="view_users_form_inherit_store" model="ir.ui.view">
            <field name="name">res.users.form.inherit.store</field>
            <field name="model">res.users</field>
            <field name="inherit_id" ref="base.view_users_form"/>
            <field name="arch" type="xml">
                <xpath expr="//page[@name='access_rights']" position="inside">
                    <group string="Rights management store" name="store_rights">
                        <field name="groups_id" widget="many2many_tags" 
                               domain="[('name', 'in', ['Seller store', 'Manager store'])]"
                               string="Roles in the store"
                               help="Select the access level for this module"/>
                    </group>
                </xpath>
            </field>
        </record>

       <!-- Action simplified to manage the roles -->
        <record id="action_store_user_roles" model="ir.actions.act_window">
            <field name="name">Roles Users store</field>
            <field name="res_model">res.users</field>
            <field name="view_mode">tree,form</field>
            <field name="help">Manage user roles for the Store Management module</field>
        </record>
    </data>
</odoo>